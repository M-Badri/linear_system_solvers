#
# This Makefile was generated by Code::Blocks IDE.
#

SRCS_f90d1 = \
mod_base_linear_solver.f90 \
mod_lis_linear_solver.f90 \
smod_lis_linear_solver.f90 

SRCS_f90d2 = \
mod_aux_csr_matrix.f90 \
mod_aux_precision.f90 \
mod_aux_string_functions.f90 

OBJS_f90d1 = \
mod_base_linear_solver.o \
mod_lis_linear_solver.o \
smod_lis_linear_solver.o 

OBJS_f90d2 = \
mod_aux_csr_matrix.o \
mod_aux_precision.o \
mod_aux_string_functions.o 

SRC_DIR_f90d1 = src/lib/linear_sys/

SRC_DIR_f90d2 = src/lib/utils/
OBJS_DIR = obj/Release/src/lib/linear_sys/
EXE_DIR = bin/Release/

EXE = liblinear_sys_lib.a
FC = ifort
LD = ar
IDIR = -Ithird_party/zoo/intel/include -Ithird_party/toast/intel/include -Ithird_party/lis/intel/include 
CFLAGS = -O2 -fpp -qopenmp -xCORE-AVX2 -inline-level=2 -fast  -module $(OBJS_DIR) $(IDIR)
LFLAGS = -qopenmp 
LIBS = -Lthird_party/zoo/intel/lib -Lthird_party/toast/intel/lib -Lthird_party/lis/intel/lib -lzoo -ltoast -llis

VPATH = $(SRC_DIR_f90d1):$(OBJS_DIR):$(SRC_DIR_f90d2):$(OBJS_DIR)
OBJS = $(addprefix $(OBJS_DIR), $(OBJS_f90d1) $(OBJS_f90d2))

all : $(EXE)

$(EXE) : $(OBJS_f90d1) $(OBJS_f90d2)
	@mkdir -p $(EXE_DIR)
	rm -f $(EXE_DIR)$(EXE)
	$(LD) -r -s $(EXE_DIR)$(EXE) $(OBJS)

$(OBJS_f90d1):
	@mkdir -p $(OBJS_DIR)
	$(FC) $(CFLAGS) -c $(SRC_DIR_f90d1)$(@:.o=.f90) -o $(OBJS_DIR)$@

$(OBJS_f90d2):
	@mkdir -p $(OBJS_DIR)
	$(FC) $(CFLAGS) -c $(SRC_DIR_f90d2)$(@:.o=.f90) -o $(OBJS_DIR)$@

clean :
	rm -f $(OBJS_DIR)*.*
	rm -f $(EXE_DIR)$(EXE)

# File dependencies
mod_base_linear_solver.o: \
    mod_base_linear_solver.f90 \
    mod_aux_csr_matrix.o \
    mod_aux_precision.o
mod_lis_linear_solver.o: \
    mod_lis_linear_solver.f90 \
    mod_aux_csr_matrix.o \
    mod_aux_precision.o \
    mod_base_linear_solver.o
smod_lis_linear_solver.o: \
    smod_lis_linear_solver.f90 \
    mod_aux_string_functions.o \
    mod_lis_linear_solver.o
mod_aux_csr_matrix.o: \
    mod_aux_csr_matrix.f90 \
    mod_aux_precision.o
mod_aux_precision.o: \
    mod_aux_precision.f90
mod_aux_string_functions.o: \
    mod_aux_string_functions.f90 \
    mod_aux_precision.o

